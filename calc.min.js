function jsCalc(b){var a=this,c=0;b=(typeof b==="object")?b:{};b.id=(typeof b.id==="string")?b.id:"js-calc";if(document.getElementById(b.id)){return null}b.width=(typeof b.width==="string")?b.width:"400px";b.height=(typeof b.height==="string")?b.height:"800px";b.mode=(typeof b.mode==="string")?(["DEG","RAD"].indexOf(b.mode)>-1?b.mode:"DEG"):"DEG";b.shiftEvent=(typeof b.shiftEvent==="function")?b.shiftEvent:function(){};b.clearEvent=(typeof b.clearEvent==="function")?b.clearEvent:function(){};b.themeClass=(typeof b.themeClass==="string")?b.themeClass:"";a.error=false;a.answer=0;a.uiScale=function(){var d=Math.min(a.element.clientWidth,a.element.clientHeight);if(c!==d){c=d;a.element.style.fontSize=Math.min(a.element.clientWidth,a.element.clientHeight)/10+"px";a.display.style.paddingTop=a.display.clientHeight/4+"px";a.display.style.lineHeight=a.element.style.fontSize}};a.displayScale=function(){var f=a.display,d=a.fsize,e=(f.clientWidth-52)/(d.clientWidth*f.innerHTML.length);if(e<1){f.style.fontSize=e+"em"}};a.clear=function(){a.display.innerHTML="";a.display.style.fontSize="";a.error=false;b.clearEvent(a.display);return true};a.isConst=function(d){return(d===String.fromCharCode(960)||d==="e"||d==="E"||d===")")};a.numpadClickEvent=function(d){d.preventDefault();a.error&&a.clear();if(d.target.tagName==="SPAN"){a.display.innerHTML+=d.target.innerHTML}else{if(d.target.parentNode.classList.contains("js-calc-btn-container")){a.display.innerHTML+=d.target.children[0].innerHTML}}a.displayScale();a.uiScale()};a.opadClickevent=function(l){l.preventDefault();var k=l.target,i=null;if(k.tagName==="SPAN"){i=k.innerHTML}else{if(l.target.parentNode.classList.contains("js-calc-btn-container")){i=k.children[0].innerHTML}}if(i){if(i=="AC"){return a.clear()}var j=a.display,d=j.innerHTML.split(String.fromCharCode(960)).join("(PI)").split("E").join("(E)"),h=d.slice(-1),f=(!isNaN(h)||a.isConst(h)||d.substr(-3)==="ANS");switch(i){case"=":mMath.unitMode;d=d.split("ANS").join(a.answer.toString()).split(String.fromCharCode(8730)).join("sqrt").replace(/(\d+(?=%))/g,"($1/100)").split("%").join("").replace(/(\d(?=\())/g,"$1*").replace(/(\)(?=\d|\())/g,"$1*");d=d.split("");d[0]==="*"&&d.shift();d[d.length-1]==="*"&&d.pop();d=d.join("");var g;try{g=Parser.parse(d);a.answer=g.evaluate()}catch(l){a.answer="ERROR!";a.error=true}j.innerHTML=a.answer;break;case"DEL":if(j.innerHTML!==""){var d=j.innerHTML.split("");d.pop();j.innerHTML=d.join("")}break;case String.fromCharCode(247):j.innerHTML+="/";break;case"(":case"ANS":j.innerHTML+=((f&&j.innerHTML!=="")?"*":"")+i;break;default:j.innerHTML+=i;break}if(j.innerHTML===""){a.clear()}else{j.innerHTML=j.innerHTML.split("**").join("^").split("<br></br>").join("")}a.displayScale();a.uiScale()}};a.advancedClickEvent=function(k){k.preventDefault();var j=k.target,h=null;if(j.tagName==="SPAN"){h=j.innerHTML}else{if(k.target.parentNode.classList.contains("js-calc-btn-container")){h=j.children[0].innerHTML}}if(h){var i=a.display,d=i.innerHTML,g=d.slice(-1),f=(d!=="")&&(!isNaN(g)||a.isConst(g));switch(h){case"SHIFT":a.advanced.classList.toggle("shifted");b.shiftEvent(a.advanced);break;case"MODE":a.mode.innerHTML=mMath.unitMode=(a.mode.innerHTML=="DEG")?"RAD":"DEG";break;case"sin":case"asin":case"tan":case"atan":case"cos":case"acos":case"log":case String.fromCharCode(8730):i.innerHTML+=(f?"*":"")+h+"(";break;case"x!":i.innerHTML+=(f?"*":"")+"fac(";break;case"x<sup>2</sup>":i.innerHTML+="^2";break;case"x<sup>y</sup>":i.innerHTML+="^";break;case"10<sup>x</sup>":i.innerHTML+=(f?"*":"")+"10^";break;case"<sup>y</sup>"+String.fromCharCode(8730)+"x":i.innerHTML+="^(1/";break;case"E":i.innerHTML+=(f?"*":"")+"E";break;default:break}a.displayScale();a.uiScale()}};a.create=function(){var h,m,l,e,g,f,k,i,n,j,d=function(o,q){var p=document.createElement("div");p.className="js-calc-"+o;p.innerHTML=(typeof q==="string")?q:"";return p};h=document.createElement("div");h.id=b.id;h.className="js-calc"+((b.themeClass.length>0)?" "+b.themeClass:"");h.style.width=b.width;h.style.height=b.height;h.appendChild(g=d("fsize","X"));h.appendChild(l=d("mode",b.mode));m=document.createElement("div");m.className="js-calc-display";h.appendChild(m);h.appendChild(e=d("panel"));f=document.createElement("div");f.appendChild(n=d("advanced",'<div class="js-calc-primary js-calc-btn-container"><div class="l"><span>SHIFT</span></div><div><span>sin</span></div><div><span>cos</span></div><div><span>tan</span></div><div><span>x!</span></div><div><span>E</span></div><div class="l"><span>MODE</span></div><div><span>log</span></div><div><span>ln</span></div><div><span>&radic;</span></div><div><span>x<sup>y</sup></span></div><div><span>e</span></div></div><div class="js-calc-shift js-calc-btn-container"><div class="l"><span>SHIFT</span></div><div><span>asin</span></div><div><span>acos</span></div><div><span>atan</span></div><div><span>x!</span></div><div><span>E</span></div><div class="l"><span>MODE</span></div><div><span>10<sup>x</sup></span></div><div><span>e<sup>x</sup></span></div><div><span>x<sup>2</sup></span></div><div><span><sup>y</sup>&radic;x</span></div><div><span>e</span></div></div>'));f.appendChild(j=d("basic"));j.appendChild(k=d("numpad js-calc-btn-container","<div><span>7</span></div><div><span>8</span></div><div><span>9</span></div><div><span>4</span></div><div><span>5</span></div><div><span>6</span></div><div><span>1</span></div><div><span>2</span></div><div><span>3</span></div><div><span>0</span></div><div><span>.</span></div><div><span>&pi;</span></div>"));j.appendChild(i=d("opad js-calc-btn-container",'<div><span>(</span></div><div><span>)</span></div><div><span>%</span></div><div><span>*</span></div><div><span>&divide;</span></div><div class="l"><span>AC</span></div><div><span>+</span></div><div><span>-</span></div><div class="l"><span>DEL</span></div><div class="js-calc-eq"><span>=</span></div><div class="l"><span>ANS</span></div>'));e.appendChild(f);h.appendChild(e);a.mode=l;a.display=m;a.panel=e;a.advanced=n;a.fsize=g;n.addEventListener("click",a.advancedClickEvent,false);k.addEventListener("click",a.numpadClickEvent,false);i.addEventListener("click",a.opadClickevent,false);a.element=h};return a};